import{c as g,s as n}from"./index-DAYYsS5P.js";const a=new Set,l=new Set,c=new Map;function u(){a.clear(),l.clear(),c.clear();try{const o=[],r=[];g({messageTrackingOnly:!0,callback:(e,s)=>(e.startsWith("processed_message_")?o.push(e):e.startsWith("counted_message_")&&r.push(e),!0)}),n("all_processed_messages"),console.log(`[UNREAD-COUNT-FIX] Reset all message tracking (${o.length} processed, ${r.length} counted)`)}catch(o){console.error("[UNREAD-COUNT-FIX] Error clearing storage:",o)}}function i(o=24*60*60*1e3){const r=Date.now(),e=[];c.forEach((s,t)=>{r-s>o&&e.push(t)}),e.forEach(s=>{a.delete(s),l.delete(s),c.delete(s);try{n(`processed_message_${s}`),n(`counted_message_${s}`)}catch(t){console.error("[UNREAD-COUNT-FIX] Error removing old entries from storage:",t)}}),e.length>0&&console.log(`[UNREAD-COUNT-FIX] Cleaned up ${e.length} old message tracking entries`)}setInterval(()=>{i()},30*60*1e3);console.log("[UNREAD-COUNT-FIX] Unread count fix module initialized");export{i as cleanupOldMessages,u as resetMessageTracking};
